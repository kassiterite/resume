@page "/"
@using Resume.Models
@using Resume.Services
@using Microsoft.JSInterop;
@inject IJSRuntime JSRuntime
@inject PdfService PdfService

<PageTitle>Резюме</PageTitle>

<div class="resume-container">
    <header class="header">
        <div class="profile-section">
            <img src="images/profile.jpg" alt="Фото профиля" class="profile-img" />
            <div>
                <h1>@Person?.FullName</h1>
                <h2>@Person?.Position</h2>
            </div>
        </div>
        <div class="contact-info">
            <p>📧 @Person?.Email</p>
            <p>📍 @Person?.Location</p>
        </div>
    </header>
    <div class="main-content">
        <section class="section">
            <h3>Обо мне</h3>
            <p>@Person?.Summary</p>
        </section>

        @*<section class="section">
            <h3>Навыки</h3>
            <div class="skills-container">
                @foreach (var skill in Person?.Skills ?? Enumerable.Empty<Skill>())
                {
                                    <div class="skill-item" style="--animation-delay: @(skill.Number * 0.2)s;">
                                <span class="skill-name">@skill.Name</span>
                                    <div class="skill-bar">
                                                <div class="skill-level" style="--level: @(skill.Level)%;"></div>
                                        </div>
                            </div>
                }
            </div>
        </section>*@

        <section class="section">
        <h3>Опыт работы</h3>
        <div class="experience-container">
                @foreach (var exp in Person?.Experience ?? Enumerable.Empty<Experience>())
                {
                            <div class="experience-item">
                                <div class="experience-period">@exp.Period</div>
                                <div class="experience-details">
                                    <h4>@exp.Position</h4>
                                    <h5>@exp.Company</h5>
                                    <p>@exp.Description</p>
                                </div>
                            </div>
                }
        </div>
        </section>
        </div>
</div>

<button @onclick="GeneratePdf" class="pdf-button">📄 Скачать PDF</button>

@code {
    private Person? Person { get; set; }

    private void TestClick()
    {
        Console.WriteLine("Кнопка работает!");
    }

    private async Task GeneratePdfSimple()
    {
        await JSRuntime.InvokeVoidAsync("generatePdf", "resume-container", "resume.pdf");
    }

    private async Task GeneratePdf()
    {
        await PdfService.GeneratePdfAsync();
    }

    protected override void OnInitialized()
    {
        Person = new Person
            {
                FullName = "Гончаренко-Кретов Дмитрий",
                Position = "Химик-аналитик/Химик-технолог",
                Email = "g.kassiebre@gmail.com",
                Phone = "+7 (953) 801-65-54",
                Location = "Москва, Россия",
                Summary = "Разносторонний химик с обширным опытом в области аналитической химии, химии твердого тела и электрохимии. Окончил НХТК им. Д. И. Менделеева по специальности: " + '\u0022' + "Технология аналитического контроля качества химических соединений" + '\u0022' + ". Вышел из колледжа лаборантом химического анализа 5 разряда. Обучаюсь по совместительству в РХТУ им. Д. И. Менделеева по специальности: " + '\u0022' + "Кибернетика химических процессов" + '\u0022' + ". Учеба не сказывается на моей работе. Прошел курсы повышения квалификации по нейтронных и синхронным методам на базе МГУ им. М. В. Ломоносова.",
                Experience = new List<Experience>
            {
                new()
                {
                    Period = "2022, 5 месяцев",
                    Position = "Лаборант-практикант",
                    Company = "ГК Росатом, НЗХК",
                    Description = "Изучение физико-химических методов анализа (авто-титрант, ICP MS, определение распределения частиц, определение удельной поверхности методом БЭТ, XRF). Разработка образца катодного материала типа NMC для литий-ионного аккумулятора."
                },
                new()
                {
                    Period = "2022, 1 месяц",
                    Position = "Химик-гальваник",
                    Company = "АльтерЭго",
                    Description = "Покрытие ювелирных изделий гальванопластическими покрытиями (родий, палладий, рутений, золото, серебро) и бижутерии из титана катафорезными лаками."
                },
                new()
                {
                    Period = "2023-2024",
                    Position = "Лаборант",
                    Company = "РУСТОР (Сколтех)",
                    Description = "Контроль качества производимого катодного материала типа NMC электрохимическими (CV), физико-химическими (БЭТ, распределение частиц, насыпная плотность, спектрофотометрия, XRD) методами анализа."
                },
                new()
                {
                    Period = "2024-"+DateTime.Now.Year+" (текущее место работы)",
                    Position = "Старший лаборант",
                    Company = "РУСТОР (Сколтех)",
                    Description = "Разработка технологии производства катодного материала типа NMC. Улучшение качеств продукции, допирование, разработка технической документации для применяемого оборудования. Разработка базы данных для контроля выпускаемой продукции. Изучение научных статей, грантов в области производства для улучшения качеств продукции. Разработка методов контроля качества продукции. Разработка простой альтернативы для определения Li-ионов в катодном материале NMC(Zr,Ti,Ta doped)."
                }

            }
            };
    }
}